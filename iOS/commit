#!/bin/sh
â€‹
LINTPATH='.swiftlint.yml'
declare -a PATHS=("MSCoreKit" "MSFoundation" "MSUIKit" "MusicSpot" "Features")
failures=""
â€‹
for path in "${PATHS[@]}"; do
    if [ -d "$path" ]; then
        echo "ğŸ‘€ Running SwiftLint for $path"
        result=$(swiftlint lint --progress --config $LINTPATH $path)
        if [[ "$result" == *warning* ]]; then
            echo "ğŸš§ Lint Warning: \n$result"
        fi
        if [[ ! "$result" == *error* ]]; then
            echo "âœ… Lint succeed for $path\n"
        else
            echo "âŒ Lint failed for $path\n"
            failures+="\n\033[1mâœ”ï¸ $path\033[0m\n$result\n"
        fi
    else
        echo "â“ $path directory does not exist."
        exit 1
    fi
done
â€‹
if [ ! -z "$failures" ]; then
    echo "$failures"
    exit 1
else
    echo "âœ¨ All linting checks passed. Ready to commit."
    gitmoji -c
fi